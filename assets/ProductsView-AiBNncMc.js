import{a as _}from"./axios-L6U4YIEh.js";import{S as C}from"./sweetalert2.all-j_TnOq6W.js";import{L as M}from"./LangyuanLoading-3-LfqLRw.js";import{M as k}from"./bootstrap.esm-bUYV0ftw.js";import{_ as v,o as i,c as l,b as t,t as n,z as x,A,D as P,e as y,d as p,F as g,u as V,r as b,x as E}from"./index-tI2OgXb-.js";/* empty css              */const N={props:["tempProduct","addCart","status"],data(){return{productModal:null,qty:1}},template:"#userProductModal",methods:{open(){this.productModal.show()},close(){this.productModal.hide()}},watch:{tempProduct(){this.qty=1}},mounted(){this.productModal=new k(this.$refs.modal)}},w={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},I={class:"modal-dialog modal-xl",role:"document"},U={class:"modal-content border-0"},$={class:"modal-header bg-dark text-white"},S={class:"modal-title",id:"exampleModalLabel"},D=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),T={class:"modal-body"},q={class:"row"},R={class:"col-sm-6"},B=["src"],z={class:"col-sm-6"},F={class:"badge bg-primary rounded-pill"},O={key:0,class:"h5"},j={key:1},G={class:"h6"},H={class:"h5"},J={class:"input-group"},K=["disabled"],Q={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function W(s,a,e,r,d,c){return i(),l("div",w,[t("div",I,[t("div",U,[t("div",$,[t("h5",S,[t("span",null,n(e.tempProduct.title),1)]),D]),t("div",T,[t("div",q,[t("div",R,[t("img",{class:"img-fluid",src:e.tempProduct.imageUrl,alt:""},null,8,B)]),t("div",z,[t("span",F,n(e.tempProduct.category),1),t("p",null,"商品描述："+n(e.tempProduct.description),1),t("p",null,"商品內容："+n(e.tempProduct.content),1),e.tempProduct.price===e.tempProduct.origin_price?(i(),l("div",O,n(e.tempProduct.price)+" 元",1)):(i(),l("div",j,[t("del",G,"原價 "+n(e.tempProduct.origin_price)+" 元",1),t("div",H,"現在只要 "+n(e.tempProduct.price)+" 元",1)])),t("div",null,[t("div",J,[x(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":a[0]||(a[0]=u=>d.qty=u)},null,512),[[A,d.qty]]),t("button",{type:"button",class:"btn btn-primary",onClick:a[1]||(a[1]=u=>e.addCart(e.tempProduct.id,d.qty)),disabled:e.tempProduct.id===e.status.addCartLoading},[e.tempProduct.id===e.status.addCartLoading?(i(),l("span",Q)):P("",!0),y("加入購物車")],8,K)])])])])])])])],512)}const X=v(N,[["render",W]]);var Y={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:m,VITE_APP_API_NAME:h}=Y,Z={data(){return{isLoading:!0,products:[],tempProduct:{},carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(){_.get(`${m}/v2/api/${h}/products/all`).then(s=>{this.products=s.data.products,this.isLoading=!1}).catch(s=>{console.log(s.data.message)})},openModal(s){this.tempProduct=s,this.$refs.userModal.open()},addCart(s,a=1){const e={product_id:s,qty:a};this.status.addCartLoading=s,_.post(`${m}/v2/api/${h}/cart`,{data:e}).then(r=>{this.status.addCartLoading="",C.fire(r.data.message),this.$refs.userModal.close()}).catch(r=>{console.log(r)})},changeCartNum(s,a=1){const e={product_id:s.product_id,qty:a};this.status.changeCartNumLoading=s.id,_.put(`${m}/v2/api/${h}/cart/${s.id}`,{data:e}).then(r=>{this.status.changeCartNumLoading="",this.getCart()}).catch(r=>{console.log(r.response.data.message)})}},components:{UserModal:X,LangyuanLoading:M},mounted(){this.getProduct()}},tt={class:"container"},et={class:"mt-4"},st={class:"table align-middle"},ot=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),at={style:{width:"200px"}},dt={key:0,class:"h5"},nt={key:1},it={class:"h6"},lt={class:"h5"},rt={class:"btn-group btn-group-sm"},ct=["onClick"],ut=["disabled","onClick"],_t={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function mt(s,a,e,r,d,c){const u=b("LangyuanLoading"),f=b("user-modal");return i(),l(g,null,[p(u,{active:d.isLoading,"onUpdate:active":a[0]||(a[0]=o=>d.isLoading=o)},null,8,["active"]),t("div",tt,[t("div",et,[p(f,{"temp-product":d.tempProduct,"add-cart":c.addCart,status:d.status,ref:"userModal"},null,8,["temp-product","add-cart","status"]),t("table",st,[ot,t("tbody",null,[(i(!0),l(g,null,V(d.products,o=>(i(),l("tr",{key:o.id},[t("td",at,[t("div",{style:E([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.imageUrl})`}])},null,4)]),t("td",null,n(o.title),1),t("td",null,[o.origin_price===o.price?(i(),l("div",dt,n(o.price)+" 元 ",1)):(i(),l("div",nt,[t("del",it,"原價 "+n(o.origin_price)+" 元",1),t("div",lt,"現在只要 "+n(o.price)+" 元",1)]))]),t("td",null,[t("div",rt,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:L=>c.openModal(o)}," 查看更多 ",8,ct),t("button",{type:"button",class:"btn btn-outline-danger",disabled:o.id===d.status.addCartLoading,onClick:L=>c.addCart(o.id)},[o.id===d.status.addCartLoading?(i(),l("span",_t)):P("",!0),y(" 加到購物車 ")],8,ut)])])]))),128))])])])])],64)}const yt=v(Z,[["render",mt]]);export{yt as default};
