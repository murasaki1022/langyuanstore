import{a as _}from"./axios-L6U4YIEh.js";import{S as M,L as k}from"./index-ZJ1HC83I.js";import{M as x}from"./bootstrap.esm-owtkFIww.js";import{_ as v,o as n,c as l,a as t,t as i,s as w,v as I,z as P,d as y,b as p,w as A,F as g,q as V,r as b,A as E,x as N,y as S}from"./index-zDdCWI9y.js";const $={props:["tempProduct","addCart","status"],data(){return{productModal:null,qty:1}},template:"#userProductModal",methods:{open(){this.productModal.show()},close(){this.productModal.hide()}},watch:{tempProduct(){this.qty=1}},mounted(){this.productModal=new x(this.$refs.modal)}},U={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},q={class:"modal-dialog modal-xl",role:"document"},T={class:"modal-content border-0"},D={class:"modal-header bg-dark text-white"},R={class:"modal-title",id:"exampleModalLabel"},z=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),B={class:"modal-body"},F={class:"row"},O={class:"col-sm-6"},j=["src"],G={class:"col-sm-6"},H={class:"badge bg-primary rounded-pill"},J={key:0,class:"h5"},K={key:1},Q={class:"h6"},W={class:"h5"},X={class:"input-group"},Y=["disabled"],Z={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function tt(e,a,s,r,d,c){return n(),l("div",U,[t("div",q,[t("div",T,[t("div",D,[t("h5",R,[t("span",null,i(s.tempProduct.title),1)]),z]),t("div",B,[t("div",F,[t("div",O,[t("img",{class:"img-fluid",src:s.tempProduct.imageUrl,alt:""},null,8,j)]),t("div",G,[t("span",H,i(s.tempProduct.category),1),t("p",null,"商品描述："+i(s.tempProduct.description),1),t("p",null,"商品內容："+i(s.tempProduct.content),1),s.tempProduct.price===s.tempProduct.origin_price?(n(),l("div",J,i(s.tempProduct.price)+" 元",1)):(n(),l("div",K,[t("del",Q,"原價 "+i(s.tempProduct.origin_price)+" 元",1),t("div",W,"現在只要 "+i(s.tempProduct.price)+" 元",1)])),t("div",null,[t("div",X,[w(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":a[0]||(a[0]=u=>d.qty=u)},null,512),[[I,d.qty]]),t("button",{type:"button",class:"btn btn-primary",onClick:a[1]||(a[1]=u=>s.addCart(s.tempProduct.id,d.qty)),disabled:s.tempProduct.id===s.status.addCartLoading},[s.tempProduct.id===s.status.addCartLoading?(n(),l("span",Z)):P("",!0),y("加入購物車")],8,Y)])])])])])])])],512)}const st=v($,[["render",tt]]);var et={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:h,VITE_APP_API_NAME:m}=et,ot={data(){return{isLoading:!0,products:[],tempProduct:{},carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(){_.get(`${h}/v2/api/${m}/products/all`).then(e=>{this.products=e.data.products,this.isLoading=!1}).catch(e=>{console.log(e.data.message)})},openModal(e){this.tempProduct=e,this.$refs.userModal.open()},addCart(e,a=1){const s={product_id:e,qty:a};this.status.addCartLoading=e,_.post(`${h}/v2/api/${m}/cart`,{data:s}).then(r=>{this.status.addCartLoading="",M.fire(r.data.message),this.$refs.userModal.close()}).catch(r=>{console.log(r)})},changeCartNum(e,a=1){const s={product_id:e.product_id,qty:a};this.status.changeCartNumLoading=e.id,_.put(`${h}/v2/api/${m}/cart/${e.id}`,{data:s}).then(r=>{this.status.changeCartNumLoading="",this.getCart()}).catch(r=>{console.log(r.response.data.message)})}},components:{UserModal:st,Loading:k},mounted(){this.getProduct()}},f=e=>(N("data-v-17d7a340"),e=e(),S(),e),at=f(()=>t("div",{class:"loadingio-spinner-ripple-64xhhn6i6r6"},[t("div",{class:"ldio-aeq8wza18cr"},[t("div"),t("div")])],-1)),dt={class:"container"},it={class:"mt-4"},nt={class:"table align-middle"},lt=f(()=>t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1)),rt={style:{width:"200px"}},ct={key:0,class:"h5"},ut={key:1},_t={class:"h6"},ht={class:"h5"},mt={class:"btn-group btn-group-sm"},pt=["onClick"],gt=["disabled","onClick"],bt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function vt(e,a,s,r,d,c){const u=b("loading"),C=b("user-modal");return n(),l(g,null,[p(u,{active:d.isLoading,"onUpdate:active":a[0]||(a[0]=o=>d.isLoading=o)},{default:A(()=>[at]),_:1},8,["active"]),t("div",dt,[t("div",it,[p(C,{"temp-product":d.tempProduct,"add-cart":c.addCart,status:d.status,ref:"userModal"},null,8,["temp-product","add-cart","status"]),t("table",nt,[lt,t("tbody",null,[(n(!0),l(g,null,V(d.products,o=>(n(),l("tr",{key:o.id},[t("td",rt,[t("div",{style:E([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.imageUrl})`}])},null,4)]),t("td",null,i(o.title),1),t("td",null,[o.origin_price===o.price?(n(),l("div",ct,i(o.price)+" 元 ",1)):(n(),l("div",ut,[t("del",_t,"原價 "+i(o.origin_price)+" 元",1),t("div",ht,"現在只要 "+i(o.price)+" 元",1)]))]),t("td",null,[t("div",mt,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:L=>c.openModal(o)}," 查看更多 ",8,pt),t("button",{type:"button",class:"btn btn-outline-danger",disabled:o.id===d.status.addCartLoading,onClick:L=>c.addCart(o.id)},[o.id===d.status.addCartLoading?(n(),l("span",bt)):P("",!0),y(" 加到購物車 ")],8,gt)])])]))),128))])])])])],64)}const Lt=v(ot,[["render",vt],["__scopeId","data-v-17d7a340"]]);export{Lt as default};
