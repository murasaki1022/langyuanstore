import{S as C,a as A,A as N,P as S,N as V}from"./autoplay-h5YaJa0N.js";import{a as _}from"./axios-L6U4YIEh.js";import{S as k,c as y}from"./cartStore-IKhcSpMC.js";import{_ as E,s as B,a as T,m as R,c as g,d,b as t,w as r,e as n,t as c,l as U,u as D,F as v,h as b,j as P,r as u,o as p,i as M}from"./index-nYRqH9oE.js";import{L as q}from"./LangyuanLoading-toIstLLL.js";import"./commonjsHelpers-4gQjN7DL.js";var $={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};window.bootstrap=B;const{VITE_APP_API_URL:m,VITE_APP_API_NAME:h}=$,j={data(){return{isLoading:!0,products:[],productInfo:[],qty:1,carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(){_.get(`${m}/v2/api/${h}/products`).then(a=>{this.products=a.data.products,this.isLoading=!1}).catch(a=>{alert(a.data.message)})},getProductInfo(){const{id:a}=this.$route.params;_.get(`${m}/v2/api/${h}/product/${a}`).then(o=>{this.productInfo=o.data.product,this.isLoading=!1}).catch(o=>{alert(o.data.message)})},addCart(a,o){const l={product_id:a,qty:o};this.status.addCartLoading=a,_.post(`${m}/v2/api/${h}/cart`,{data:l}).then(i=>{this.status.addCartLoading="",k.fire(i.data.message)}).catch(i=>{alert(i.response.data.message)})},...T(y,["addCart","getCart"]),changeCartNum(a,o=1){const l={product_id:a.product_id,qty:o};this.status.changeCartNumLoading=a.id,_.put(`${m}/v2/api/${h}/cart/${a.id}`,{data:l}).then(i=>{this.status.changeCartNumLoading="",this.getCart()}).catch(i=>{alert(i.response.data.message)})}},components:{LangyuanLoading:q,Swiper:C,SwiperSlide:A},setup(){return{modules:[N,S,V]}},computed:{...R(y,["cart"])},watch:{"$route.params":{handler(){this.getProductInfo()},deep:!0}},mounted(){this.getProduct(),this.getProductInfo(),this.getCart()}},F={class:"container"},O={class:"row m-sm-auto"},z={class:"col-12 my-4"},G={class:"path"},H={class:"col-md-6 align-items-center"},J=["src"],K={class:"col-md-5"},Q={class:"fw-bold h1 mb-4"},W={class:"badge rounded-pill bg-primary mb-2"},X={class:"row d-flex flex-column"},Y={class:"col"},Z={class:"fs-5 text-secondary2"},tt={class:"col"},st={class:"text-muted"},et={class:"mb-0 text-muted"},ot={class:"h4 fw-bold"},at={class:"text-primary"},ct={class:"ms-3"},it={class:"row d-flex mt-5"},nt={class:"col-3 col-md-4"},dt=["value"],rt={class:"col-5 col-md-8"},lt=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1),_t=t("h3",{class:"fw-bold mt-5"},"更多推薦商品",-1),ut=t("hr",{class:"mb-5"},null,-1),pt={class:"row"},mt={class:"col-md-4 col-sm"},ht={class:"card product-card mb-sm-4 ms-md-4 m-sm-auto"},ft=["src"],gt={class:"card-body"},vt={class:"badge rounded-pill bg-primary mb-2"},wt={class:"card-title fs-6 fw-bold"},yt={class:"card-text"},bt=["onClick"],Pt=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1);function It(a,o,l,i,s,w){const I=u("LangyuanLoading"),f=u("RouterLink"),L=u("swiper-slide"),x=u("swiper");return p(),g(v,null,[d(I,{active:s.isLoading,"onUpdate:active":o[0]||(o[0]=e=>s.isLoading=e)},null,8,["active"]),t("div",F,[t("div",O,[t("div",z,[t("div",G,[d(f,{to:"/",style:{"text-decoration":"none"}},{default:r(()=>[n("首頁")]),_:1}),n(" > "),d(f,{to:"/products",style:{"text-decoration":"none"}},{default:r(()=>[n("全部商品")]),_:1}),n(" > "+c(s.productInfo.title),1)])]),t("div",H,[t("img",{class:"img-fluid",src:s.productInfo.imageUrl,alt:"商品圖片"},null,8,J)]),t("div",K,[t("h2",Q,c(s.productInfo.title),1),t("h4",null,[t("span",W,c(s.productInfo.category),1)]),t("div",X,[t("div",Y,[t("p",Z,c(s.productInfo.description),1)]),t("div",tt,[t("p",st,"規格："+c(s.productInfo.content),1)])]),t("p",et,[n("原價"),t("del",null,"NT$ "+c(s.productInfo.origin_price),1)]),t("p",ot,[n("現正特價 "),t("span",at," NT$ "+c(s.productInfo.price),1),t("span",ct,"/ "+c(s.productInfo.unit),1)]),t("div",it,[t("div",nt,[U(t("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=e=>s.qty=e)},[(p(),g(v,null,b(10,e=>t("option",{key:`add-${e}-count`,value:e},c(e),9,dt)),64))],512),[[D,s.qty,void 0,{number:!0}]])]),t("div",rt,[t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:o[2]||(o[2]=P(e=>w.addCart(s.productInfo.id,s.qty),["prevent"]))},[lt,n("加入購物車")])])])])]),_t,ut,d(x,{autoplay:!0,slidesPerView:1,spaceBetween:10,breakpoints:{375:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:3,spaceBetween:30},1024:{slidesPerView:4,spaceBetween:30}},modules:i.modules,class:"mySwiper"},{default:r(()=>[(p(!0),g(v,null,b(s.products,e=>(p(),M(L,{key:e.id},{default:r(()=>[t("div",pt,[t("div",mt,[t("div",ht,[d(f,{to:`/product/${e.id}`,class:"card-product-link"},{default:r(()=>[t("img",{src:e.imageUrl,class:"card-product-img",alt:"商品圖片"},null,8,ft)]),_:2},1032,["to"]),t("div",gt,[t("span",vt,c(e.category),1),t("h5",wt,c(e.title),1),t("p",yt,"NT$ "+c(e.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:P(Lt=>w.addCart(e.id),["prevent"])},[Pt,n("加入購物車")],8,bt)])])])])]),_:2},1024))),128))]),_:1},8,["modules"])])],64)}const kt=E(j,[["render",It]]);export{kt as default};
