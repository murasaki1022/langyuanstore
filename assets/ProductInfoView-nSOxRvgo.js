import{S as x,a as C,A as N,P as V,N as A}from"./autoplay-ATQrQqJs.js";import{a as _}from"./axios-L6U4YIEh.js";import{S as k}from"./sweetalert2.all-LHpgrSOc.js";import{L as S}from"./LangyuanLoading-gjBbvZf8.js";import{b as E}from"./bootstrap.esm-owtkFIww.js";import{_ as B,c as f,d,b as t,w as r,e as c,t as i,j as T,l as U,F as v,g as b,i as y,r as u,o as p,h as D}from"./index-RfGbcoU1.js";import"./commonjsHelpers-4gQjN7DL.js";var M={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};window.bootstrap=E;const{VITE_APP_API_URL:m,VITE_APP_API_NAME:h}=M,R={data(){return{isLoading:!0,products:[],productInfo:[],qty:1,carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(){_.get(`${m}/v2/api/${h}/products`).then(a=>{this.products=a.data.products,this.isLoading=!1}).catch(a=>{console.log(a.data.message)})},getProductInfo(){const{id:a}=this.$route.params;_.get(`${m}/v2/api/${h}/product/${a}`).then(e=>{this.productInfo=e.data.product,this.isLoading=!1}).catch(e=>{console.log(e.data.message)})},addCart(a,e=1){const l={product_id:a,qty:e};this.status.addCartLoading=a,_.post(`${m}/v2/api/${h}/cart`,{data:l}).then(n=>{this.status.addCartLoading="",k.fire(n.data.message)}).catch(n=>{console.log(n.response.data.message)})},changeCartNum(a,e=1){const l={product_id:a.product_id,qty:e};this.status.changeCartNumLoading=a.id,_.put(`${m}/v2/api/${h}/cart/${a.id}`,{data:l}).then(n=>{this.status.changeCartNumLoading="",this.getCart()}).catch(n=>{console.log(n.response.data.message)})}},components:{LangyuanLoading:S,Swiper:x,SwiperSlide:C},setup(){return{modules:[N,V,A]}},mounted(){this.getProduct(),this.getProductInfo()}},q={class:"container"},j={class:"row m-sm-auto"},$={class:"col-12 my-4"},F={class:"path"},O={class:"col-md-6 align-items-center"},z=["src"],G={class:"col-md-5"},H={class:"fw-bold h1 mb-4"},J={class:"badge rounded-pill bg-primary mb-2"},K={class:"row d-flex flex-column"},Q={class:"col"},W={class:"fs-5 text-secondary2"},X={class:"col"},Y={class:"text-muted"},Z={class:"mb-0 text-muted"},tt={class:"h4 fw-bold"},st={class:"text-primary"},ot={class:"ms-3"},et={class:"row d-flex mt-5"},at={class:"col-3 col-md-4"},it={class:"col-5 col-md-8"},nt=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1),ct=t("h3",{class:"fw-bold mt-5"},"更多推薦商品",-1),dt=t("hr",{class:"mb-5"},null,-1),rt={class:"row"},lt={class:"col-md-4 col-sm"},_t={class:"card product-card mb-sm-4 ms-md-4 m-sm-auto"},ut=["src"],pt={class:"card-body"},mt={class:"badge rounded-pill bg-primary mb-2"},ht={class:"card-title fs-6 fw-bold"},gt={class:"card-text"},ft=["onClick"],vt=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1);function wt(a,e,l,n,s,w){const P=u("LangyuanLoading"),g=u("router-link"),I=u("swiper-slide"),L=u("swiper");return p(),f(v,null,[d(P,{active:s.isLoading,"onUpdate:active":e[0]||(e[0]=o=>s.isLoading=o)},null,8,["active"]),t("div",q,[t("div",j,[t("div",$,[t("div",F,[d(g,{to:"/",style:{"text-decoration":"none"}},{default:r(()=>[c("首頁")]),_:1}),c(" > "),d(g,{to:"/products",style:{"text-decoration":"none"}},{default:r(()=>[c("全部商品")]),_:1}),c(" > "+i(s.productInfo.title),1)])]),t("div",O,[t("img",{class:"img-fluid",src:s.productInfo.imageUrl,alt:""},null,8,z)]),t("div",G,[t("h2",H,i(s.productInfo.title),1),t("h4",null,[t("span",J,i(s.productInfo.category),1)]),t("div",K,[t("div",Q,[t("p",W,i(s.productInfo.description),1)]),t("div",X,[t("p",Y,"規格："+i(s.productInfo.content),1)])]),t("p",Z,[c("原價"),t("del",null,"NT$"+i(s.productInfo.origin_price),1)]),t("p",tt,[c("現正特價"),t("span",st," NT$"+i(s.productInfo.price),1),t("span",ot,"/ "+i(s.productInfo.unit),1)]),t("div",et,[t("div",at,[T(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=o=>s.qty=o)},[(p(),f(v,null,b(10,o=>t("option",{key:`add-${o}-count`},i(o),1)),64))],512),[[U,s.qty,void 0,{number:!0}]])]),t("div",it,[t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:e[2]||(e[2]=y(o=>w.addCart(s.productInfo.id,s.qty),["prevent"]))},[nt,c("加入購物車")])])])])]),ct,dt,d(L,{autoplay:!0,slidesPerView:1,spaceBetween:10,breakpoints:{375:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:3,spaceBetween:30},1024:{slidesPerView:4,spaceBetween:30}},modules:n.modules,class:"mySwiper"},{default:r(()=>[(p(!0),f(v,null,b(s.products,o=>(p(),D(I,{key:o.id},{default:r(()=>[t("div",rt,[t("div",lt,[t("div",_t,[d(g,{to:`/product/${o.id}`,class:"card-product-link"},{default:r(()=>[t("img",{src:o.imageUrl,class:"card-product-img"},null,8,ut)]),_:2},1032,["to"]),t("div",pt,[t("span",mt,i(o.category),1),t("h5",ht,i(o.title),1),t("p",gt,"NT$ "+i(o.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:y(bt=>w.addCart(o.id),["prevent"])},[vt,c("加入購物車")],8,ft)])])])])]),_:2},1024))),128))]),_:1},8,["modules"])])],64)}const Vt=B(R,[["render",wt]]);export{Vt as default};
