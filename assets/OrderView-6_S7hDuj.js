import{a as u}from"./axios-L6U4YIEh.js";import{M as g}from"./bootstrap.esm-owtkFIww.js";import{_ as O,o as d,c as s,a as e,m as y,F as c,q as p,b as $,r as v,u as k,t as n,z as m,s as w,bp as x}from"./index-vZGw7y8U.js";const P={data(){return{delOrderModal:null}},methods:{openModal(){this.delOrderModal.show()},hideModal(){this.delOrderModal.hide()}},props:["tempOrder","deleteOrder"],mounted(){this.delOrderModal=new g(this.$refs.delOrderModal,{keyboard:!1,backdrop:"static"})}},V={id:"delOrderModal",ref:"delOrderModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delOrderModalLabel","aria-hidden":"true"},A={class:"modal-dialog"},E={class:"modal-content border-0"},C=y('<div class="modal-header bg-danger text-white"><h5 id="delOrderModalLabel" class="modal-title"><span>刪除訂單</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 是否刪除 <strong class="text-danger">這筆訂單</strong> (刪除後將無法恢復)。 </div>',2),D={class:"modal-footer"},L=e("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function I(a,o,r,M,i,h){return d(),s("div",V,[e("div",A,[e("div",E,[C,e("div",D,[L,e("button",{type:"button",class:"btn btn-danger",onClick:o[0]||(o[0]=(..._)=>r.deleteOrder&&r.deleteOrder(..._))}," 確認刪除 ")])])])],512)}const N=O(P,[["render",I]]);var S={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:b,VITE_APP_API_NAME:f}=S,R={data(){return{orders:[],tempOrder:{},isNew:!1,pages:{}}},methods:{getOrderList(a=1){const o=`${b}/v2/api/${f}/admin/orders?page=${a}`;u.get(o).then(r=>{this.orders=r.data.orders,this.pages=r.data.pagination}).catch(r=>{console.log(r)})},openDelOrderModal(a){this.tempOrder={...a},this.$refs.removeModal.openModal()}},deleteOrder(){const a=`${b}/v2/api/${f}/admin/order/${this.tempOrder.id}`;u.delete(a).then(o=>{alert(o.data.message),this.$refs.removeModal.hideModal(),this.getOrderList()}).catch(o=>{alert(o.data.message)})},components:{DeleteOrderModal:N},mounted(){this.getOrderList()}},U={class:"table mt-4"},B=e("thead",null,[e("tr",null,[e("th",{width:"80"},"購買時間"),e("th",{width:"60"},"Email"),e("th",{width:"150"},"購買品項"),e("th",{width:"80"},"應付金額"),e("th",{width:"60"},"是否付款"),e("th",{width:"60"},"編輯")])],-1),T=e("td",null,null,-1),q=["textContent"],z={class:"list-unstyled"},F={class:"text-right"},j={class:"form-check form-switch"},G=["id","onUpdate:modelValue"],H=["for"],J={key:0},K={key:1},Q={class:"btn-group"},W=e("button",{class:"btn btn-outline-primary btn-sm",type:"button"}," 檢視 ",-1),X=["onClick"];function Y(a,o,r,M,i,h){const _=v("DeleteOrderModal");return d(),s(c,null,[e("table",U,[B,e("tbody",null,[(d(!0),s(c,null,p(i.orders,t=>(d(),s(c,{key:t.id},[i.orders.length?(d(),s("tr",{key:0,class:k({"text-secondary":!t.is_paid})},[T,e("td",null,[t.user?(d(),s("span",{key:0,textContent:n(t.user.email)},null,8,q)):m("",!0)]),e("td",null,[e("ul",z,[(d(!0),s(c,null,p(t.products,l=>(d(),s("li",{key:l.id},n(l.product.title)+" 數量："+n(l.qty)+" "+n(l.product.unit),1))),128))])]),e("td",F,"$"+n(t.total),1),e("td",null,[e("div",j,[w(e("input",{class:"form-check-input",type:"checkbox",id:`paidSwitch${t.id}`,"onUpdate:modelValue":l=>t.is_paid=l},null,8,G),[[x,t.is_paid]]),e("label",{class:"form-check-label",for:`paidSwitch${t.id}`},[t.is_paid?(d(),s("span",J,"已付款")):(d(),s("span",K,"未付款"))],8,H)])]),e("td",null,[e("div",Q,[W,e("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:l=>h.openDelOrderModal(t)}," 刪除 ",8,X)])])],2)):m("",!0)],64))),128))])]),$(_,{"temp-order":i.tempOrder,"delete-order":a.deleteOrder,ref:"removeModal"},null,8,["temp-order","delete-order"])],64)}const de=O(R,[["render",Y]]);export{de as default};
