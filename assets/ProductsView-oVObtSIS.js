import{a as m}from"./axios-L6U4YIEh.js";import{S as k,c as f}from"./cartStore-1TopY6Uw.js";import{_ as V,a as F,m as w,c as l,d as y,b as t,k as E,v as N,l as u,i as c,e as p,t as g,q as C,F as b,g as B,h as M,r as h,o as d,w as A}from"./index-JFojWkfZ.js";import{L as S}from"./LangyuanLoading-vFZKnRFg.js";import{P as D}from"./PaginationComponent-SmB125Ti.js";import"./commonjsHelpers-4gQjN7DL.js";var I={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:_,VITE_APP_API_NAME:v}=I,z={data(){return{isLoading:!0,search:"",pages:{},products:[],category:"",tempProduct:{},carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(a=1,s=""){m.get(`${_}/v2/api/${v}/products?page=${a}&category=${s}`).then(i=>{this.products=i.data.products,this.pages=i.data.pagination,this.category=s,this.isLoading=!1,this.products=this.products.filter(r=>r.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(i=>{alert(i.data.message)})},addCart(a,s=1){const i={product_id:a,qty:s};this.status.addCartLoading=a,m.post(`${_}/v2/api/${v}/cart`,{data:i}).then(r=>{this.status.addCartLoading="",k.fire(r.data.message)}).catch(r=>{alert(r)})},...F(f,["addCart","getCart"]),changeCartNum(a,s=1){const i={product_id:a.product_id,qty:s};this.status.changeCartNumLoading=a.id,m.put(`${_}/v2/api/${v}/cart/${a.id}`,{data:i}).then(()=>{this.status.changeCartNumLoading="",this.getCart()}).catch(r=>{alert(r.response.data.message)})}},components:{LangyuanLoading:S,PaginationComponent:D},watch:{search(){this.getProduct(1,"")}},computed:{...w(f,["cart"])},mounted(){this.getProduct(),this.getCart(),console.log(this.category,this.pages,this.search)}},R=t("div",{class:"container"},null,-1),T=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},[t("div",{class:"position-absolute",style:{"background-size":"cover",top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/langyuanstore/1709404618785.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=oo2yt95kfXo6GVgQ%2FszSqGyOV0LZVCpDbF7Fa80OFYm44h9nnCRT7GzLlM3LGCenWNzb4H7TQHi29aYWxCV7Y0kUJb2qEhviyeMbV0i%2FWBZR5YrQ%2BtNvBQOXDZvp6Ffb27GEEVcs1%2F8SzCTMWVJxux7qi7DauVKsEM47RhsdpWNznsJW6m58Sr3iYpIuZsmdp0EfZGlqoPngkbIQFGMNFj%2B7D%2BtphUUm2x7iqgICnxFoaGo6%2FMhBhztbND3uFymwMU4CPMB0g%2FoZmeGmsyeTOE9qsCxKJCOvZSWHcVY%2FPRuFV%2B3yALgn%2BtfzQKFtmh%2FiPd9XdYBQ0cMi3cLQvghxMw%3D%3D)",opacity:"0.4"}}),t("h2",{class:"fw-bold"},"愛牠，所以給牠最好的")],-1),G={class:"bg-light py-4"},U={class:"container"},Q={class:"row d-flex justify-content-end"},q={class:"col-md-3"},O={class:"input-group w-md-50 mt-md-0 mt-3"},W=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary rounded-0",type:"button",id:"search"},[t("i",{class:"bi bi-search-heart"})])],-1),Y={class:"container mt-md-5 mt-3 mb-7"},Z={class:"row"},j={class:"col-md-3 mb-sm-4"},J={class:"list-group list-group-flush"},H={class:"col-md-9"},K={class:"container"},X={class:"row m-auto"},$={key:0,class:"fs-4 text-center"},tt={class:"text-primary"},st={class:"card product-card mb-sm-4 ms-md-4 m-sm-auto"},et=["src"],ot={class:"card-body"},at={class:"badge rounded-pill bg-primary mb-2"},it={class:"card-title fs-md-2 fs-6 fw-bold"},rt={class:"card-text"},nt=["onClick"],ct=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1);function dt(a,s,i,r,o,n){const P=h("LangyuanLoading"),L=h("RouterLink"),x=h("PaginationComponent");return d(),l(b,null,[y(P,{active:o.isLoading,"onUpdate:active":s[0]||(s[0]=e=>o.isLoading=e)},null,8,["active"]),R,T,t("div",G,[t("div",U,[t("div",Q,[t("div",q,[t("div",O,[E(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>o.search=e),class:"form-control rounded-0 border-primary",placeholder:"要找什麼商品呢?"},null,512),[[N,o.search,void 0,{trim:!0}]]),W])])])])]),t("div",Y,[t("div",Z,[t("div",j,[t("div",J,[t("a",{href:"#",class:u(["list-group-item list-group-item-action",{active:o.category===""}]),onClick:s[2]||(s[2]=c(e=>n.getProduct("",""),["prevent"]))}," 全部商品 ",2),t("a",{href:"#",class:u(["list-group-item list-group-item-action",{active:o.category==="貓狗通用"}]),onClick:s[3]||(s[3]=c(e=>n.getProduct("","貓狗通用"),["prevent"]))},"貓狗通用",2),t("a",{href:"#",class:u(["list-group-item list-group-item-action",{active:o.category==="狗狗專用"}]),onClick:s[4]||(s[4]=c(e=>n.getProduct("","狗狗專用"),["prevent"]))},"狗狗專用",2),t("a",{href:"#",class:u(["list-group-item list-group-item-action",{active:o.category==="貓貓專用"}]),onClick:s[5]||(s[5]=c(e=>n.getProduct("","貓貓專用"),["prevent"]))},"貓貓專用",2)])]),t("div",H,[t("div",K,[t("div",X,[!this.isLoading&&this.products.length===0&&this.search.trim()!==""?(d(),l("p",$,[p("搜尋不到 "),t("span",tt,g(o.search),1),p(" 喔｡ﾟ(ﾟ´ω`ﾟ)ﾟ｡")])):C("",!0),(d(!0),l(b,null,B(o.products,e=>(d(),l("div",{class:"col-xl-4 col-lg-5 col-md-6 col-sm product-list m-auto",key:e.id},[t("div",st,[y(L,{to:`/product/${e.id}`,class:"card-product-link"},{default:A(()=>[t("img",{src:e.imageUrl,class:"card-product-img",alt:"商品圖片"},null,8,et)]),_:2},1032,["to"]),t("div",ot,[t("span",at,g(e.category),1),t("h5",it,g(e.title),1),t("p",rt,"NT$ "+g(e.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:c(lt=>n.addCart(e.id),["prevent"])},[ct,p("加入購物車")],8,nt)])])]))),128))])]),this.products.length!==0?(d(),M(x,{key:0,pages:o.pages,onChangePages:n.getProduct,class:"d-flex justify-content-center mb-4 mb-md-6 m-auto"},null,8,["pages","onChangePages"])):C("",!0)])])])],64)}const vt=V(z,[["render",dt]]);export{vt as default};
