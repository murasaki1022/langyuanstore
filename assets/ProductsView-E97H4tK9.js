import{a as l}from"./axios-L6U4YIEh.js";import{S as L,c as f}from"./cartStore-0pjzt_8X.js";import{_ as x,a as V,m as k,c as u,d as g,b as t,k as F,v as w,l as d,i as c,F as C,g as M,r as m,o as p,w as E,t as h,e as N}from"./index-2Fvx8ClQ.js";import{L as A}from"./LangyuanLoading-tro8tTM6.js";import{P as B}from"./PaginationComponent-lRMzCKVk.js";import"./bootstrap.esm-bUYV0ftw.js";var S={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:_,VITE_APP_API_NAME:v}=S,D={data(){return{isLoading:!0,search:"",pages:{},products:[],category:"",tempProduct:{},carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(o=1,s=""){l.get(`${_}/v2/api/${v}/products?page=${o}&category=${s}`).then(i=>{this.products=i.data.products,this.pages=i.data.pagination,this.category=s,this.isLoading=!1,this.products=this.products.filter(n=>n.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(i=>{console.log(i.data.message)})},openModal(o){this.tempProduct=o,this.$refs.userModal.open()},addCart(o,s=1){const i={product_id:o,qty:s};this.status.addCartLoading=o,l.post(`${_}/v2/api/${v}/cart`,{data:i}).then(n=>{this.status.addCartLoading="",L.fire(n.data.message),this.$refs.userModal.close()}).catch(n=>{console.log(n)})},...V(f,["addCart","getCart"]),changeCartNum(o,s=1){const i={product_id:o.product_id,qty:s};this.status.changeCartNumLoading=o.id,l.put(`${_}/v2/api/${v}/cart/${o.id}`,{data:i}).then(n=>{this.status.changeCartNumLoading="",this.getCart()}).catch(n=>{console.log(n.response.data.message)})}},components:{LangyuanLoading:A,PaginationComponent:B},watch:{search(){this.getProduct(1,"")}},computed:{...k(f,["cart"])},mounted(){this.getProduct(),this.getCart()}},I=t("div",{class:"container"},null,-1),z=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"400px"}},[t("div",{class:"position-absolute",style:{"background-size":"cover",top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/langyuanstore/1709404618785.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=oo2yt95kfXo6GVgQ%2FszSqGyOV0LZVCpDbF7Fa80OFYm44h9nnCRT7GzLlM3LGCenWNzb4H7TQHi29aYWxCV7Y0kUJb2qEhviyeMbV0i%2FWBZR5YrQ%2BtNvBQOXDZvp6Ffb27GEEVcs1%2F8SzCTMWVJxux7qi7DauVKsEM47RhsdpWNznsJW6m58Sr3iYpIuZsmdp0EfZGlqoPngkbIQFGMNFj%2B7D%2BtphUUm2x7iqgICnxFoaGo6%2FMhBhztbND3uFymwMU4CPMB0g%2FoZmeGmsyeTOE9qsCxKJCOvZSWHcVY%2FPRuFV%2B3yALgn%2BtfzQKFtmh%2FiPd9XdYBQ0cMi3cLQvghxMw%3D%3D)",opacity:"0.4"}}),t("h2",{class:"fw-bold"},"愛牠，所以給牠最好的")],-1),T={class:"bg-light py-4"},G={class:"container"},U={class:"row d-flex justify-content-end"},R={class:"col-md-3"},Q={class:"input-group w-md-50 mt-md-0 mt-3"},O=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary rounded-0",type:"button",id:"search"},[t("i",{class:"bi bi-search-heart"})])],-1),W={class:"container mt-md-5 mt-3 mb-7"},Y={class:"row"},Z={class:"col-md-3 mb-sm-4"},j={class:"list-group list-group-flush"},q={class:"col-md-9"},$={class:"container"},J={class:"row m-auto"},H={class:"card product-card mb-sm-4 ms-md-4 m-sm-auto"},K=["src"],X={class:"card-body"},tt={class:"badge rounded-pill bg-primary mb-2"},st={class:"card-title fs-md-2 fs-6 fw-bold"},et={class:"card-text"},ot=["onClick"],at=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1);function it(o,s,i,n,a,r){const y=m("LangyuanLoading"),b=m("router-link"),P=m("PaginationComponent");return p(),u(C,null,[g(y,{active:a.isLoading,"onUpdate:active":s[0]||(s[0]=e=>a.isLoading=e)},null,8,["active"]),I,z,t("div",T,[t("div",G,[t("div",U,[t("div",R,[t("div",Q,[F(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>a.search=e),class:"form-control rounded-0 border-primary",placeholder:"要找什麼商品呢?"},null,512),[[w,a.search,void 0,{trim:!0}]]),O])])])])]),t("div",W,[t("div",Y,[t("div",Z,[t("div",j,[t("a",{href:"#",class:d(["list-group-item list-group-item-action",{active:a.category===""}]),onClick:s[2]||(s[2]=c(e=>r.getProduct("",""),["prevent"]))}," 全部商品 ",2),t("a",{href:"#",class:d(["list-group-item list-group-item-action",{active:a.category==="貓狗通用"}]),onClick:s[3]||(s[3]=c(e=>r.getProduct("","貓狗通用"),["prevent"]))},"貓狗通用",2),t("a",{href:"#",class:d(["list-group-item list-group-item-action",{active:a.category==="狗狗專用"}]),onClick:s[4]||(s[4]=c(e=>r.getProduct("","狗狗專用"),["prevent"]))},"狗狗專用",2),t("a",{href:"#",class:d(["list-group-item list-group-item-action",{active:a.category==="貓貓專用"}]),onClick:s[5]||(s[5]=c(e=>r.getProduct("","貓貓專用"),["prevent"]))},"貓貓專用",2)])]),t("div",q,[t("div",$,[t("div",J,[(p(!0),u(C,null,M(a.products,e=>(p(),u("div",{class:"col-xl-4 col-lg-5 col-md-6 col-sm product-list m-auto",key:e.id},[t("div",H,[g(b,{to:`/product/${e.id}`,class:"card-product-link"},{default:E(()=>[t("img",{src:e.imageUrl,class:"card-product-img"},null,8,K)]),_:2},1032,["to"]),t("div",X,[t("span",tt,h(e.category),1),t("h5",st,h(e.title),1),t("p",et,"NT$ "+h(e.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:c(nt=>r.addCart(e.id),["prevent"])},[at,N("加入購物車")],8,ot)])])]))),128))])]),g(P,{pages:a.pages,onChangePages:r.getProduct,class:"d-flex justify-content-center mb-4 mb-md-6 m-auto"},null,8,["pages","onChangePages"])])])])],64)}const mt=x(D,[["render",it]]);export{mt as default};
