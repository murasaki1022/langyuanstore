import{a as l}from"./axios-L6U4YIEh.js";import{S as a,c as b}from"./cartStore-6GiJ4yWN.js";import{_ as y,a as x,m as w,c as _,b as t,F as v,h as k,d as f,w as g,t as r,r as N,o as u,n as $,l as B,v as A,e as P}from"./index-Jy2MfXVp.js";import"./commonjsHelpers-4gQjN7DL.js";var T={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:h,VITE_APP_API_NAME:p}=T,I={data(){return{isLoading:!0,carts:{},status:{changeCartNumLoading:""}}},methods:{...x(b,["addCart","getCart"]),changeCartNum(o,s=1){const n={product_id:o.product_id,qty:s};this.status.changeCartNumLoading=o.id,l.put(`${h}/v2/api/${p}/cart/${o.id}`,{data:n}).then(c=>{this.status.changeCartNumLoading="",this.getCart()}).catch(c=>{alert(c.response.data.message)})},deleteCartItem(o){a.fire({title:"確定刪除該品項?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"取消"}).then(s=>{s.isConfirmed&&(l.delete(`${h}/v2/api/${p}/cart/${o}`).then(n=>{this.getCart()}).catch(n=>{alert(n.response.data.message)}),a.fire({title:"已刪除成功",icon:"success"}))})},deleteCartAll(){a.fire({title:"確定清空購物車?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&l.delete(`${h}/v2/api/${p}/carts`).then(s=>{this.getCart(),a.fire({title:"已清空購物車",icon:"success"})}).catch(s=>{a.fire({icon:"error",title:s.response.data.message})})})}},components:{},computed:{...w(b,["cart","final_total"])},mounted(){this.getCart()}},L={class:"container mt-5"},V={class:"mt-3"},E={class:"row"},S={class:"col-md-8"},q={class:"table"},R=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0",style:{width:"300px"}},"品名"),t("th",{scope:"col",class:"border-0",style:{width:"200px"}},"數量"),t("th",{scope:"col",class:"border-0 text-end"},"小計"),t("th",{scope:"col",class:"border-0"})])],-1),U={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},D={class:"mb-0 fw-bold my-3 d-inline-block"},M={class:"border-0 align-middle"},z={class:"input-group input-group-sm"},F={class:"input-group mb-3"},O=["disabled","onClick"],j=["onUpdate:modelValue"],G=["disabled","onClick"],H={class:"border-0 align-middle",style:{"max-width":"160px"}},J={class:"mb-0 ms-auto text-end"},K={class:"border-0 align-middle text-center"},Q=["onClick"],W=t("button",{type:"button",class:"btn btn-outline-primary mb-5 mt-3"},[t("i",{class:"bi bi-chevron-compact-left"}),P(" 回到商品專區 ")],-1),X={class:"col-md-4"},Y={class:"border p-4 mb-4"},Z=t("h4",{class:"fw-bold mb-4"},"購物明細",-1),tt={class:"table text-muted border-bottom"},et=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"商品小計",-1),ot={class:"text-end border-0 px-0 pt-4"},st=t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),t("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"信用卡")],-1),nt={class:"d-flex justify-content-between mt-4"},at=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),it={class:"mb-0 h4 fw-bold"},rt=t("button",{type:"submit",class:"btn btn-primary btn-lg w-100 mt-4 text-white"},"送出訂單",-1);function ct(o,s,n,c,C,d){const m=N("RouterLink");return u(),_("div",L,[t("div",V,[t("div",E,[t("div",S,[t("table",q,[R,t("tbody",null,[(u(!0),_(v,null,k(o.cart,e=>(u(),_("tr",{class:"border-bottom border-top",key:e.id},[t("th",U,[t("td",{style:$([{width:"72px",height:"72px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4),t("p",D,r(e.product.title),1)]),t("td",M,[t("div",z,[t("div",F,[t("button",{type:"button",class:"btn btn-primary",disabled:e.qty<=1,onClick:i=>{e.qty--,d.changeCartNum(e,e.qty)}},"-",8,O),B(t("input",{min:"1",type:"number",class:"form-control text-center","onUpdate:modelValue":i=>e.qty=i,disabled:""},null,8,j),[[A,e.qty]]),t("button",{type:"button",class:"btn btn-primary",disabled:e.id===C.status.changeCartNumLoading,onClick:i=>{e.qty++,d.changeCartNum(e,e.qty)}},"+",8,G)])])]),t("td",H,[t("p",J,"NT$ "+r(e.total),1)]),t("td",K,[t("i",{type:"button",class:"bi bi-trash3 text-danger fs-5",onClick:i=>d.deleteCartItem(e.id)},null,8,Q)])]))),128))])]),f(m,{to:"/products"},{default:g(()=>[W]),_:1})]),t("div",X,[t("div",Y,[Z,t("table",tt,[t("tbody",null,[t("tr",null,[et,t("td",ot,"NT$ "+r(o.final_total),1)]),st])]),t("div",nt,[at,t("p",it,"NT$ "+r(o.final_total),1)]),f(m,{to:"/order-confirmation"},{default:g(()=>[rt]),_:1})])])])])])}const ht=y(I,[["render",ct]]);export{ht as default};
