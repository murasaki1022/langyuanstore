import{a as u}from"./axios-L6U4YIEh.js";import{S as a,c as f}from"./cartStore-IKhcSpMC.js";import{_ as x,a as w,m as v,c as i,b as t,F as k,h as N,d as g,w as y,t as c,r as $,o as r,n as B,l as A,v as P,e as m}from"./index-nYRqH9oE.js";import"./commonjsHelpers-4gQjN7DL.js";var T={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:h,VITE_APP_API_NAME:p}=T,I={data(){return{isLoading:!0,carts:{},status:{changeCartNumLoading:""}}},methods:{...w(f,["addCart","getCart"]),changeCartNum(o,s=1){const n={product_id:o.product_id,qty:s};this.status.changeCartNumLoading=o.id,u.put(`${h}/v2/api/${p}/cart/${o.id}`,{data:n}).then(l=>{this.status.changeCartNumLoading="",this.getCart()}).catch(l=>{alert(l.response.data.message)})},deleteCartItem(o){a.fire({title:"確定刪除該品項?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"取消"}).then(s=>{s.isConfirmed&&(u.delete(`${h}/v2/api/${p}/cart/${o}`).then(n=>{this.getCart()}).catch(n=>{alert(n.response.data.message)}),a.fire({title:"已刪除成功",icon:"success"}))})},deleteCartAll(){a.fire({title:"確定清空購物車?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&u.delete(`${h}/v2/api/${p}/carts`).then(s=>{this.getCart(),a.fire({title:"已清空購物車",icon:"success"})}).catch(s=>{a.fire({icon:"error",title:s.response.data.message})})})}},components:{},computed:{...v(f,["cart","final_total"])},mounted(){this.getCart()}},L={class:"container mt-5"},V={class:"mt-3"},E={class:"row"},S={class:"col-md-8"},q={key:0},R=t("div",{class:"fs-2"},[m("購物車沒有東西哦～"),t("br"),m("請移駕至商品專區")],-1),U=[R],D={key:1,class:"table"},M=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0",style:{width:"300px"}},"品名"),t("th",{scope:"col",class:"border-0",style:{width:"200px"}},"數量"),t("th",{scope:"col",class:"border-0 text-end"},"小計"),t("th",{scope:"col",class:"border-0"})])],-1),z={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},F={class:"mb-0 fw-bold my-3 d-inline-block"},O={class:"border-0 align-middle"},j={class:"input-group input-group-sm"},G={class:"input-group mb-3"},H=["disabled","onClick"],J=["onUpdate:modelValue"],K=["disabled","onClick"],Q={class:"border-0 align-middle",style:{"max-width":"160px"}},W={class:"mb-0 ms-auto text-end"},X={class:"border-0 align-middle text-center"},Y=["onClick"],Z=t("button",{type:"button",class:"btn btn-outline-primary mb-5 mt-3"},[t("i",{class:"bi bi-chevron-compact-left"}),m(" 回到商品專區 ")],-1),tt={class:"col-md-4"},et={class:"border p-4 mb-4"},ot=t("h4",{class:"fw-bold mb-4"},"購物明細",-1),st={class:"table text-muted border-bottom"},nt=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"商品小計",-1),at={class:"text-end border-0 px-0 pt-4"},it=t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),t("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"信用卡")],-1),rt={class:"d-flex justify-content-between mt-4"},dt=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),ct={class:"mb-0 h4 fw-bold"},lt=t("button",{type:"submit",class:"btn btn-primary btn-lg w-100 mt-4 text-white"},"送出訂單",-1);function _t(o,s,n,l,C,_){const b=$("RouterLink");return r(),i("div",L,[t("div",V,[t("div",E,[t("div",S,[o.cart.length===0?(r(),i("div",q,U)):(r(),i("table",D,[M,t("tbody",null,[(r(!0),i(k,null,N(o.cart,e=>(r(),i("tr",{class:"border-bottom border-top",key:e.id},[t("th",z,[t("td",{style:B([{width:"72px",height:"72px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4),t("p",F,c(e.product.title),1)]),t("td",O,[t("div",j,[t("div",G,[t("button",{type:"button",class:"btn btn-primary",disabled:e.qty<=1,onClick:d=>{e.qty--,_.changeCartNum(e,e.qty)}},"-",8,H),A(t("input",{min:"1",type:"number",class:"form-control text-center","onUpdate:modelValue":d=>e.qty=d,disabled:""},null,8,J),[[P,e.qty]]),t("button",{type:"button",class:"btn btn-primary",disabled:e.id===C.status.changeCartNumLoading,onClick:d=>{e.qty++,_.changeCartNum(e,e.qty)}},"+",8,K)])])]),t("td",Q,[t("p",W,"NT$ "+c(e.total),1)]),t("td",X,[t("i",{type:"button",class:"bi bi-trash3 text-danger fs-5",onClick:d=>_.deleteCartItem(e.id)},null,8,Y)])]))),128))])])),g(b,{to:"/products"},{default:y(()=>[Z]),_:1})]),t("div",tt,[t("div",et,[ot,t("table",st,[t("tbody",null,[t("tr",null,[nt,t("td",at,"NT$ "+c(o.final_total),1)]),it])]),t("div",rt,[dt,t("p",ct,"NT$ "+c(o.final_total),1)]),g(b,{to:"/order-confirmation"},{default:y(()=>[lt]),_:1})])])])])])}const bt=x(I,[["render",_t]]);export{bt as default};
