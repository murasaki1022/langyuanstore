import{S as I,a as x,A as C,P as k,N}from"./autoplay-P3g0pn-Y.js";import{a as c}from"./axios-L6U4YIEh.js";import{S as V}from"./sweetalert2.all-LHpgrSOc.js";import{L as A}from"./LangyuanLoading-FVkP1Xco.js";import{b as E}from"./bootstrap.esm-owtkFIww.js";import{_ as S,c as b,d as p,b as t,t as n,e as _,j as B,v as T,i as f,w as m,F as v,r,o as h,g as $,h as U}from"./index-QHj10APE.js";import"./commonjsHelpers-4gQjN7DL.js";var D={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};window.bootstrap=E;const{VITE_APP_API_URL:l,VITE_APP_API_NAME:u}=D,M={data(){return{isLoading:!0,products:[],productInfo:[],carts:{},status:{addCartLoading:"",changeCartNumLoading:""}}},methods:{getProduct(){c.get(`${l}/v2/api/${u}/products`).then(s=>{this.products=s.data.products,this.isLoading=!1}).catch(s=>{console.log(s.data.message)})},getProductInfo(){const{id:s}=this.$route.params;c.get(`${l}/v2/api/${u}/product/${s}`).then(o=>{this.productInfo=o.data.product,this.isLoading=!1}).catch(o=>{console.log(o.data.message)})},addCart(s,o=1){const d={product_id:s,qty:o};this.status.addCartLoading=s,c.post(`${l}/v2/api/${u}/cart`,{data:d}).then(i=>{this.status.addCartLoading="",V.fire(i.data.message)}).catch(i=>{console.log(i)})},changeCartNum(s,o=1){const d={product_id:s.product_id,qty:o};this.status.changeCartNumLoading=s.id,c.put(`${l}/v2/api/${u}/cart/${s.id}`,{data:d}).then(i=>{this.status.changeCartNumLoading="",this.getCart()}).catch(i=>{console.log(i.response.data.message)})}},components:{LangyuanLoading:A,Swiper:I,SwiperSlide:x},setup(){return{modules:[C,k,N]}},mounted(){this.getProduct(),this.getProductInfo()}},R={class:"container"},j={class:"row align-items-center mt-5"},q={class:"col-md-6"},F=["src"],O={class:"col-md-5"},z={class:"fw-bold h1 mb-1"},G={class:"mb-0 text-muted text-end"},H={class:"h4 fw-bold text-end"},J={class:"row align-items-center"},K={class:"col-6"},Q={class:"input-group my-3 bg-light rounded"},W=t("div",{class:"input-group-prepend"},[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1"},[t("i",{class:"bi bi-dash-circle"})])],-1),X=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2"},[t("i",{class:"bi bi-plus-circle"})])],-1),Y={class:"col-6"},Z=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1),tt={class:"row my-5"},st={class:"col-md-4"},ot={class:"col-md-3"},et={class:"text-muted"},at=t("h3",{class:"fw-bold"},"更多推薦商品",-1),it=t("hr",{class:"mb-5"},null,-1),nt={class:"row"},dt={class:"col-md-4 col-sm"},ct={class:"card product-card mb-sm-4 ms-md-4 m-sm-auto"},rt=["src"],lt={class:"card-body"},ut={class:"badge rounded-pill bg-primary mb-2"},pt={class:"card-title fs-6 fw-bold"},_t={class:"card-text"},mt=["onClick"],ht=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1);function gt(s,o,d,i,a,g){const w=r("LangyuanLoading"),y=r("router-link"),P=r("swiper-slide"),L=r("swiper");return h(),b(v,null,[p(w,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=e=>a.isLoading=e)},null,8,["active"]),t("div",R,[t("div",j,[t("div",q,[t("img",{class:"img-fluid",src:a.productInfo.imageUrl,alt:""},null,8,F)]),t("div",O,[t("h2",z,n(a.productInfo.title),1),t("p",G,[_("原價"),t("del",null,"NT$"+n(a.productInfo.origin_price),1)]),t("p",H,"現正特價NT$"+n(a.productInfo.price),1),t("div",J,[t("div",K,[t("div",Q,[W,B(t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none bg-light","onUpdate:modelValue":o[1]||(o[1]=e=>s.qty=e),"aria-label":"Example text with button addon","aria-describedby":"button-addon1",min:"1",value:"1"},null,512),[[T,s.qty]]),X])]),t("div",Y,[t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:o[2]||(o[2]=f(e=>g.addCart(a.productInfo.id,s.qty),["prevent"]))},[Z,_("加入購物車")])])])])]),t("div",tt,[t("div",st,[t("p",null,n(a.productInfo.description),1)]),t("div",ot,[t("p",et,n(a.productInfo.content),1)])]),at,it,p(L,{slidesPerView:1,spaceBetween:10,pagination:{clickable:!0},breakpoints:{375:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:3,spaceBetween:30},1024:{slidesPerView:4,spaceBetween:30}},modules:i.modules,class:"mySwiper"},{default:m(()=>[(h(!0),b(v,null,$(a.products,e=>(h(),U(P,{key:e.id},{default:m(()=>[t("div",nt,[t("div",dt,[t("div",ct,[p(y,{to:`/product/${e.id}`,class:"card-product-link"},{default:m(()=>[t("img",{src:e.imageUrl,class:"card-product-img"},null,8,rt)]),_:2},1032,["to"]),t("div",lt,[t("span",ut,n(e.category),1),t("h5",pt,n(e.title),1),t("p",_t,"NT$ "+n(e.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:f(bt=>g.addCart(e.id),["prevent"])},[ht,_("加入購物車")],8,mt)])])])])]),_:2},1024))),128))]),_:1},8,["modules"])])],64)}const xt=S(M,[["render",gt]]);export{xt as default};
