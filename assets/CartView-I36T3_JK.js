import{a as c}from"./axios-L6U4YIEh.js";import{S as a,c as g}from"./cartStore-0IWLXyfu.js";import{_ as y,a as x,m as w,c as l,b as t,F as v,g as N,d as f,w as C,t as r,f as k,r as P,o as u,n as A,e as B}from"./index-pmpeWPgL.js";import"./commonjsHelpers-4gQjN7DL.js";var $={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:p,VITE_APP_API_NAME:b}=$,T={data(){return{isLoading:!0,carts:{},status:{changeCartNumLoading:""}}},methods:{...x(g,["addCart","getCart"]),changeCartNum(o,s=1){const n={product_id:o.product_id,qty:s};this.status.changeCartNumLoading=o.id,c.put(`${p}/v2/api/${b}/cart/${o.id}`,{data:n}).then(d=>{this.status.changeCartNumLoading="",this.getCart()}).catch(d=>{alert(d.response.data.message)})},deleteCartItem(o){a.fire({title:"確定刪除該品項?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"取消"}).then(s=>{s.isConfirmed&&(c.delete(`${p}/v2/api/${b}/cart/${o}`).then(n=>{this.getCart()}).catch(n=>{alert(n.response.data.message)}),a.fire({title:"已刪除成功",icon:"success"}))})},deleteCartAll(){a.fire({title:"確定清空購物車?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&c.delete(`${p}/v2/api/${b}/carts`).then(s=>{this.getCart(),a.fire({title:"已清空購物車",icon:"success"})}).catch(s=>{a.fire({icon:"error",title:s.response.data.message})})})}},components:{},computed:{...w(g,["cart","final_total"])},mounted(){this.getCart()}},L={class:"container mt-5"},I={class:"mt-3"},S={class:"row"},E={class:"col-md-8"},V={class:"table"},R=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0",style:{width:"300px"}},"品名"),t("th",{scope:"col",class:"border-0",style:{width:"200px"}},"數量"),t("th",{scope:"col",class:"border-0 text-end"},"小計"),t("th",{scope:"col",class:"border-0"})])],-1),q={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},D={class:"mb-0 fw-bold my-3 d-inline-block"},U={class:"border-0 align-middle"},M={class:"input-group input-group-sm"},z={class:"input-group mb-3"},F=["disabled","onClick"],O=t("input",{min:"1",type:"number",class:"form-control",readonly:""},null,-1),j=["disabled","onClick"],G={class:"border-0 align-middle",style:{"max-width":"160px"}},H={class:"mb-0 ms-auto text-end"},J={class:"border-0 align-middle text-center"},K=["onClick"],Q=k('<div class="input-group w-50 mb-3"><input type="text" class="form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none" placeholder="Coupon Code" aria-label="Recipient&#39;s username" aria-describedby="button-addon2"><div class="input-group-append"><button class="btn btn-outline-primary border-bottom border-top-0 border-start-0 border-end-0 rounded-0" type="button" id="button-addon2"><i class="bi bi-send-fill"></i></button></div></div>',1),W=t("button",{type:"button",class:"btn btn-outline-primary mb-5 mt-3"},[t("i",{class:"bi bi-chevron-compact-left"}),B(" 回到商品專區 ")],-1),X={class:"col-md-4"},Y={class:"border p-4 mb-4"},Z=t("h4",{class:"fw-bold mb-4"},"購物明細",-1),tt={class:"table text-muted border-bottom"},et=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"Subtotal",-1),ot={class:"text-end border-0 px-0 pt-4"},st=t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"Payment"),t("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),nt={class:"d-flex justify-content-between mt-4"},at=t("p",{class:"mb-0 h4 fw-bold"},"Total",-1),rt={class:"mb-0 h4 fw-bold"},dt=t("button",{type:"submit",class:"btn btn-primary w-100 mt-4"},"輸入訂購人資訊",-1);function it(o,s,n,d,_,i){const m=P("RouterLink");return u(),l("div",L,[t("div",I,[t("div",S,[t("div",E,[t("table",V,[R,t("tbody",null,[(u(!0),l(v,null,N(o.cart,e=>(u(),l("tr",{class:"border-bottom border-top",key:e.id},[t("th",q,[t("td",{style:A([{width:"72px",height:"72px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4),t("p",D,r(e.product.title),1)]),t("td",U,[t("div",M,[t("div",z,[t("button",{type:"button",class:"btn btn-primary",disabled:e.id===_.status.changeCartNumLoading,onClick:h=>{e.qty--,i.changeCartNum(e,e.qty)}},"-",8,F),O,t("button",{type:"button",class:"btn btn-primary",disabled:e.id===_.status.changeCartNumLoading,onClick:h=>{e.qty++,i.changeCartNum(e,e.qty)}},"+",8,j)])])]),t("td",G,[t("p",H,"NT$"+r(e.total),1)]),t("td",J,[t("i",{type:"button",class:"bi bi-trash3 text-danger fs-5",onClick:h=>i.deleteCartItem(e.id)},null,8,K)])]))),128))])]),Q,f(m,{to:"/products"},{default:C(()=>[W]),_:1})]),t("div",X,[t("div",Y,[Z,t("table",tt,[t("tbody",null,[t("tr",null,[et,t("td",ot,"NT$"+r(o.final_total),1)]),st])]),t("div",nt,[at,t("p",rt,"NT$"+r(o.final_total),1)]),f(m,{to:"/order-confirmation"},{default:C(()=>[dt]),_:1})])])])])])}const bt=y(T,[["render",it]]);export{bt as default};
