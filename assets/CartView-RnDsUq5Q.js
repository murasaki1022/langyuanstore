import{a as c}from"./axios-L6U4YIEh.js";import{S as a,c as g}from"./cartStore-1TopY6Uw.js";import{_ as C,a as x,m as v,c as u,b as t,F as w,g as k,d as f,w as y,t as d,f as N,r as P,o as b,n as A,k as B,v as T,e as $}from"./index-JFojWkfZ.js";import"./commonjsHelpers-4gQjN7DL.js";var L={VITE_APP_API_URL:"https://vue3-course-api.hexschool.io",VITE_APP_API_NAME:"langyuanstore",BASE_URL:"/langyuanstore/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:p,VITE_APP_API_NAME:_}=L,V={data(){return{isLoading:!0,carts:{},status:{changeCartNumLoading:""}}},methods:{...x(g,["addCart","getCart"]),changeCartNum(o,s=1){const n={product_id:o.product_id,qty:s};this.status.changeCartNumLoading=o.id,c.put(`${p}/v2/api/${_}/cart/${o.id}`,{data:n}).then(i=>{this.status.changeCartNumLoading="",this.getCart()}).catch(i=>{alert(i.response.data.message)})},deleteCartItem(o){a.fire({title:"確定刪除該品項?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除",cancelButtonText:"取消"}).then(s=>{s.isConfirmed&&(c.delete(`${p}/v2/api/${_}/cart/${o}`).then(n=>{this.getCart()}).catch(n=>{alert(n.response.data.message)}),a.fire({title:"已刪除成功",icon:"success"}))})},deleteCartAll(){a.fire({title:"確定清空購物車?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then(o=>{o.isConfirmed&&c.delete(`${p}/v2/api/${_}/carts`).then(s=>{this.getCart(),a.fire({title:"已清空購物車",icon:"success"})}).catch(s=>{a.fire({icon:"error",title:s.response.data.message})})})}},components:{},computed:{...v(g,["cart","final_total"])},mounted(){this.getCart()}},I={class:"container mt-5"},S={class:"mt-3"},E={class:"row"},R={class:"col-md-8"},q={class:"table"},U=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0",style:{width:"300px"}},"品名"),t("th",{scope:"col",class:"border-0",style:{width:"200px"}},"數量"),t("th",{scope:"col",class:"border-0 text-end"},"小計"),t("th",{scope:"col",class:"border-0"})])],-1),D={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},M={class:"mb-0 fw-bold my-3 d-inline-block"},z={class:"border-0 align-middle"},F={class:"input-group input-group-sm"},O={class:"input-group mb-3"},j=["disabled","onClick"],G=["onUpdate:modelValue"],H=["disabled","onClick"],J={class:"border-0 align-middle",style:{"max-width":"160px"}},K={class:"mb-0 ms-auto text-end"},Q={class:"border-0 align-middle text-center"},W=["onClick"],X=N('<div class="input-group w-50 mb-3"><input type="text" class="form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none" placeholder="Coupon Code" aria-label="Recipient&#39;s username" aria-describedby="button-addon2"><div class="input-group-append"><button class="btn btn-outline-primary border-bottom border-top-0 border-start-0 border-end-0 rounded-0" type="button" id="button-addon2"><i class="bi bi-send-fill"></i></button></div></div>',1),Y=t("button",{type:"button",class:"btn btn-outline-primary mb-5 mt-3"},[t("i",{class:"bi bi-chevron-compact-left"}),$(" 回到商品專區 ")],-1),Z={class:"col-md-4"},tt={class:"border p-4 mb-4"},et=t("h4",{class:"fw-bold mb-4"},"購物明細",-1),ot={class:"table text-muted border-bottom"},st=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"Subtotal",-1),nt={class:"text-end border-0 px-0 pt-4"},at=t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"Payment"),t("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),rt={class:"d-flex justify-content-between mt-4"},dt=t("p",{class:"mb-0 h4 fw-bold"},"Total",-1),it={class:"mb-0 h4 fw-bold"},lt=t("button",{type:"submit",class:"btn btn-primary w-100 mt-4"},"輸入訂購人資訊",-1);function ct(o,s,n,i,m,l){const h=P("RouterLink");return b(),u("div",I,[t("div",S,[t("div",E,[t("div",R,[t("table",q,[U,t("tbody",null,[(b(!0),u(w,null,k(o.cart,e=>(b(),u("tr",{class:"border-bottom border-top",key:e.id},[t("th",D,[t("td",{style:A([{width:"72px",height:"72px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4),t("p",M,d(e.product.title),1)]),t("td",z,[t("div",F,[t("div",O,[t("button",{type:"button",class:"btn btn-primary border border-dark border-1",disabled:e.id===m.status.changeCartNumLoading||e.qty<=1,onClick:r=>{e.qty--,l.changeCartNum(e,e.qty)}},"-",8,j),B(t("input",{min:"1",type:"number",class:"form-control text-center","onUpdate:modelValue":r=>e.qty=r,disabled:""},null,8,G),[[T,e.qty]]),t("button",{type:"button",class:"btn btn-primary border border-dark border-1",disabled:e.id===m.status.changeCartNumLoading,onClick:r=>{e.qty++,l.changeCartNum(e,e.qty)}},"+",8,H)])])]),t("td",J,[t("p",K,"NT$"+d(e.total),1)]),t("td",Q,[t("i",{type:"button",class:"bi bi-trash3 text-danger fs-5",onClick:r=>l.deleteCartItem(e.id)},null,8,W)])]))),128))])]),X,f(h,{to:"/products"},{default:y(()=>[Y]),_:1})]),t("div",Z,[t("div",tt,[et,t("table",ot,[t("tbody",null,[t("tr",null,[st,t("td",nt,"NT$"+d(o.final_total),1)]),at])]),t("div",rt,[dt,t("p",it,"NT$"+d(o.final_total),1)]),f(h,{to:"/order-confirmation"},{default:y(()=>[lt]),_:1})])])])])])}const mt=C(V,[["render",ct]]);export{mt as default};
